<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Promises</title>
        <meta charst="UTF-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">
        <!-- <link rel="stylesheet" href="/styles.css"> -->
        <!-- <link rel="icon" type="image/png" href="/img/coffee.png"> -->
    </head>
    <body>
        <script>
            /*
                PROMISES
                Objeto para representar un comportamiento asincrono.
                Tres estados:
                    - Pending. (Pendiente)
                    - Fullfilled. (Completado)
                    - Rejected. (Rechazado)
                
                
            */

            const x = new Promise(function (resolve, rejected) {});

            /*
                "x" estará pending hasta que se llame a "resolve" o "rejected".
                Cuando acaba la promesa, se llama al metodo:
                    - "then" si han finalizado bien (resolve)
                    - "catch" si ha ido mal (rejected)
            */

            const wait = new Promise(function (res, rej) {
                setTimeout(function(){
                    res("Finalizó bien");
                    // rej("Finalizó mal");
                }, 5000)
            }).then(function(value){
                console.log("Ha entrado en el then: ", value);
                console.log("Antes del fullfilled: ", wait);
            }).catch(function(value){
                console.log("Ha entrado en el catch: ", value);
                console.log("Antes del rejected: ", wait);
            });
            console.log("Pending: ", wait);

            setTimeout(function(){
                console.log("Después del resolve/rejected: ", wait);
            }, 5000)

            // Ajax fetch (ES6)
            fetch("http://95.39.145.183/ejercicios/color.php?min=30&max=50"
                // , {
                //     method: "GET"
                // }
            ).then(response1 => response1.json())
            .then(response2 => console.log("Respuesta 2: ", response2));

            // fetch("http://95.39.145.183/ejercicios/color.php", {
            //     method: "POST",
            //     body: "min=30&max=50",
            //     header: {"Content-type": "application/x-www-form-urlencoded"}
            // }).then(response1 => response1.json())
            // .then(response2 => console.log("Respuesta 2: ", response2));
        </script>
    </body>
</html>
